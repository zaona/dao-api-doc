:::warning
**ğŸ’¡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š**

ç”±äºå°é±¼å¹²å•†åŸåŠŸèƒ½æ¶‰åŠå•†ä¸šåŒ–ï¼Œå› æ­¤ä»…å¯¹**å¹´åº¦åˆ›ä½œè€…**å¼€æ”¾ã€‚

è‹¥ä½ å¸Œæœ›è·å¾—ä½¿ç”¨æœ¬APIçš„æƒé™ï¼Œè¯·å‰å¾€QQç¾¤ï¼š**478041977 **ï¼Œè”ç³»ç¾¤ä¸»å‰å‰å–µè¿›è¡Œç”³è¯·å¹´åº¦åˆ›ä½œè€…ã€‚
:::

### **æ–¹æ³•**

#### äº‹ä»¶**world.**onPlayerPurchaseSuccess(handler:(event:[GamePurchaseSuccessEvent](#jneYE))=>void) : [GameEventHandlerToken](https://www.yuque.com/box3lab/api/gll7mhwasgn9hoq0)
**å½“ç©å®¶æˆåŠŸè´­ä¹°ç‰©å“æ—¶è§¦å‘**

**è¾“å…¥å‚æ•°**

| **å‚æ•°** | **å¿…å¡«** | **é»˜è®¤å€¼** | **ç±»å‹** | **è¯´æ˜** |
| --- | --- | --- | --- | --- |
| handler | _æ˜¯_ | | function | ç›‘å¬åˆ°ç©å®¶è´­ä¹°åçš„å¤„ç†å‡½æ•° |

::: details ç‚¹å‡»æŸ¥çœ‹ç¤ºä¾‹ä»£ç 
```javascript
world.onPlayerPurchaseSuccess(({ userId, productId, orderId }) => {
  // å‡å¦‚å•†åŸåå°æ·»åŠ äº†æ­¤idçš„é“å…·ï¼ŒåŠŸèƒ½ä¸ºå¤æ´»é“å…·
  if (productId === 160000000000001) {
    // ç”±äºå¯èƒ½å­˜åœ¨å¤šæœçš„æƒ…å†µï¼Œæ¯ä¸ªæœéƒ½ä¼šæ”¶åˆ°æ­¤è´­ä¹°æˆåŠŸçš„å›è°ƒï¼Œå› æ­¤éœ€è¦åˆ¤æ–­å½“å‰æœåŠ¡å™¨æœ‰æ­¤ç©å®¶
    const entity = world.querySelectorAll('player').filter(e => e.player.userId === userId)[0];
    if (entity) {
      entity.player.forceRespawn();
    }  
  }
});
```
:::

### **æ¥å£**

#### GamePurchaseSuccessEvent
**å½“ç©å®¶æˆåŠŸè´­ä¹°ç‰©å“æ—¶è§¦å‘çš„äº‹ä»¶**

| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
| --- | --- | --- |
| tick | number | è´­ä¹°æˆåŠŸäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ |
| userId | string | è§¦å‘è´­ä¹°äº‹ä»¶çš„ç©å®¶userId |
| productId | number | è´­ä¹°å•†å“çš„ID |
| orderId | number | è´­ä¹°æˆåŠŸçš„è®¢å•å· |

