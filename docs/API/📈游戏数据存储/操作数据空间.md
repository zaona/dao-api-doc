
### 属性

#### 只读**storage**.**key** **: **string   
默认值：空间名称

**数据存储空间名称。**
::: details 点击查看示例代码
```javascript
const userStorage = storage.getDataStorage('users')
const storageName = userStorage.key
console.log(`storageName: ${storageName}`)
```
:::

### **方法**

#### `**storage.set**(key**:string,**value:JSONValue) **: **Promise<void>`
**传入指定键与值，无论该键是否存在，均将值设置到此键上。**

**输入参数**

| **参数** | **必填** | **默认值** | **类型** | **说明** |
| --- | --- | --- | --- | --- |
| key | _是_ | | string | 需要设置的键 |
| value | _是_ | | JSONValue | 需要设置的值 |


---


#### `**storage.get**(key**:string**) **: **Promise<ReturnValue>`
**获取指定键对应的值。**

**输入参数**

| **参数** | **必填** | **默认值** | **类型** | **说明** |
| --- | --- | --- | --- | --- |
| key | _是_ | | string | 指定的键 |

**返回值**

| **类型** | **说明** |
| --- | --- |
| ReturnValue | 异步返回数据，当获取完成时 resolve，否则 reject。 |


---


#### `**storage.update**(key**:string,**handler:(prevValue:ReturnValue)=>JSONValue) **: **Promise<void>`
**更新指定键对应的值。**

**输入参数**

| **参数** | **必填** | **默认值** | **类型** | **说明** |
| --- | --- | --- | --- | --- |
| key | _是_ | | string | 指定的键 |
| handler | _是_ | | function | 处理更新的方法，接受一个参数，为当前键的值，返回一个更新后的值 |


---


#### `**storage.remove**(key**:string**) **: **Promise<ReturnValue>`
**删除指定键值对。**

**输入参数**

| **参数** | **必填** | **默认值** | **类型** | **说明** |
| --- | --- | --- | --- | --- |
| key | _是_ | | string | 指定的键 |

**返回值**

| **类型** | **说明** |
| --- | --- |
| ReturnValue | 异步返回数据，当删除完成时 resolve，否则 reject。 |


---


#### `**storage.list**(options**:**Partial<[ListPageOptions](#wFvkb)>) **: **Promise<[QueryList](#hfKS5)>`
**批量获取键值对。**

**输入参数**

| **参数** | **必填** | **默认值** | **类型** | **说明** |
| --- | --- | --- | --- | --- |
| options | _是_ | | `Partial<[ListPageOptions](#wFvkb)>` | 批量获取键值对的配置项 |

**返回值**

| **类型** | **说明** |
| --- | --- |
| [QueryList](#hfKS5) | 异步返回数据，当获取完成时 resolve，否则 reject。 |


---


#### `**storage.destroy**() **: **Promise<void>`
**删除该数据空间。**


### **接口**

#### JSONValue
**允许存储的值，类型可以是如下类型之一：**

| **参数** | **说明** |
| --- | --- |
| string | 字符串 |
| number | 数字 |
| boolean | 布尔值 |
| JSONValue[] | JSONValue数组 |
| `{[x:string]:JSONValue}` | 键值对 |


---


#### ReturnValue
**表示一个键值对的内容。它可以是一个对象或者 **`**undefined**`

| **参数** | **类型** | **说明** |
| --- | --- | --- |
| key | string | 键名称 |
| value | JSONValue | 值内容 |
| updateTime | number | key最近更新时间 |
| createTime | number | key创建时间 |
| version | string | 更新版本号 |


---


#### ListPageOptions
**批量获取键值对的配置项。**

| **参数** | **类型** | **说明** |
| --- | --- | --- |
| cursor | number | **必选**

分页指针，用于指定本次获取的分页起点页码。 |
| pageSize | number | 可选项，分页大小，一页内的数据量，取值范围[0,100]，默认100。 |
| constraintTarget | string | 

- 约束目标值的路径，当值是JSON格式时，指定用作排序的值的路径。例如传入 `score`时，会取值上`score`属性的值作为排序、最大最小值的限制目标；

- 可以级联最多5级，例如`a.b.c.d.e`，超出视作非法参数，按下一条方式处理；

- 当路径不存在或传入非法参数时，以值本身作为目标进行排序，并打印一条警告；|
| ascending | boolean | 是否升序，设置为 true 时为升序，false为降序，不传或传入undefined时不排序； |
| max | number | 最大值，过滤返回对应值的最大值，超出或非数字则不返回该Key，默认不过滤； |
| min | number | 最小值，同max类似。 |


---


#### QueryList
**键值对查询列表，用于批量获取键值对，通过 {GameDataStorage.list} 方法返回。**

**列表根据配置项被划分为一个或多个分页，每个分页最多包含 { **[**QueryList**](#hfKS5)** | pageSize} 个键值对。**

| **参数** | **类型** | **说明** |
| --- | --- | --- |
| isLastPage | boolean | 是否为最后一页，如果翻过头了，也会为 true |
| getCurrentPage() | ()=>ReturnValue[] | 按 {QueryList &#124; pageSize} 获取当前页的键值对，返回当前页的键值对内容 |
| nextPage() | `()=> Promise<void>` | 翻到下一页，执行后 {getCurrentPage} 将返回下一页的键值对内容 |

